<% @title = "Grid-Interpolated Daily Temperatures"%>

<% content_for :title do %>
 <%= @title %>
<% end %>

<% content_for :welcome do %>
  <%= image_tag "icons/dd-map-250px.png" %>
  <h2><%= @title %></h2>
  <p>By interpolating daily temperature and humidity observations at airports, we can offer gridded temperatures (in degrees Celsius) and water vapor pressures across the region.</p>
<% end %>

<%= content_for :scripts do %>
  <script lang="js">
    function regionMap(latitude, longitude) {
      latitude = latitude.toFixed(1);
      longitude = longitude.toFixed(1);
      console.log("Clicked on " + latitude.toString() + ", " + longitude.toString())
      $('#latitude').val(latitude);
      $('#longitude').val(longitude);
      return false;
    }
  </script>
<% end %>

<h2><%= @title %></h2>
<h3>Mean temperature map for Wisconsin and surrounding states for <%= @date %>:</h3>
<%= form_tag action: :grid_temps do %>
<p>
  Previous day: <%= submit_tag @date - 1, name: :date %>&nbsp;
  Next day: <%= submit_tag @date + 1, name: :date %>&nbsp;
  Latest: <%= submit_tag Date.yesterday, name: :date %>
</p>
<% end %>
<p>
  <img
    src="<%= @map_image %>"
    alt="Yesterday's Mean Temperatures"
    usemap="#latlong"
    width="800px"/>
</p>
<%= render partial: 'partials/gridmap'%>

<h4>View/Download Weather Data Time Series</h4>
<%= render partial: "partials/grid_selector" %>

<p><a href="/weather/grid_temps.csv">Download yesterday's entire grid of data in CSV format</a></p>
