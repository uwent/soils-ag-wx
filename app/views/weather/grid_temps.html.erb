<% @title = "Grid-Interpolated Daily Temperatures"%>

<% content_for :welcome do %>
  <%= image_tag "icons/dd-map-250px.png" %>
  <h2><%= @title %></h2>
  <p>By interpolating daily temperature and humidity observations at airports, we can offer gridded temperatures (in degrees Celsius) and water vapor pressures across the region.</p>
<% end %>

<%= content_for :scripts do %>
  <script lang="js">
    function regionMap(latitude, longitude) {
      latitude = latitude.toFixed(1);
      longitude = longitude.toFixed(1);
      console.log("Clicked on " + latitude.toString() + ", " + longitude.toString())
      $('#latitude').val(latitude);
      $('#longitude').val(longitude);
      return false;
    }
  </script>
<% end %>

<h2><%= @title %></h2>

<hr>

<h4>Mean temperature map for Wisconsin and surrounding states for <%= @date %>:</h4>

<%= render partial: "partials/date_changer", locals: { action: :grid_temps } %>

<p style="font-size: smaller;"><i>Map color scale is based on min/max temp across region. Map may take a few moments to load if it hasn't already been created.</i></p>

<p><img src="<%= @map_image %>" alt="Yesterday's Mean Temperatures" usemap="#latlong"/></p>

<%= render partial: "partials/gridmap"%>

<h4>View/Download Weather Data Time Series</h4>

<p style="font-size: smaller;"><i>Note: You can click on the map to set the latitude and longitude to within half a degree.</i></p>

<%= render partial: "partials/grid_selector" %>

<p><a href="/weather/grid_temps.csv">Download yesterday's entire grid of data in CSV format</a></p>

<br>

<%= link_to "Back", :back %>
